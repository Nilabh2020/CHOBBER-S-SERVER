<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CHOBBER'S Server | Premium Content Hub</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Particle.js for better background effects -->
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Orbitron:wght@500;600;700&display=swap" rel="stylesheet">
    <style>
        /* ==================== BASE STYLES ==================== */
        :root {
            /* Bluish-Purple Color Palette */
            --bg-primary: #0a0521;
            --bg-secondary: #12083a;
            --bg-tertiary: #1b0f54;
            --bg-card: #251470;
            --primary: #6d4aff;
            --primary-light: #8a6eff;
            --primary-dark: #5836df;
            --accent: #bd4be3;
            --accent-light: #d176ed;
            --accent-dark: #9a30c2;
            --discord: #5865F2;
            --discord-dark: #4752C4;
            --text-primary: #ffffff;
            --text-secondary: #e6e6e6;
            --text-tertiary: #b3b3b3;
            --text-muted: #808080;
            --danger: #fa5252;
            --success: #40c057;
            --warning: #fd7e14;
            --info: #339af0;
            --border-color: rgba(255, 255, 255, 0.08);
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --border-radius-sm: 4px;
            --border-radius-md: 8px;
            --border-radius-lg: 12px;
            --border-radius-xl: 16px;
            --header-height: 70px;
            --transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, var(--bg-primary), var(--bg-secondary), #1e0f5a);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
            position: relative;
        }
        /* Particles.js container */
        #particles-js {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
        }
        button, input, select, textarea {
            font-family: inherit;
            outline: none;
        }
        button {
            cursor: pointer;
            border: none;
        }
        a {
            text-decoration: none;
            color: inherit;
        }
        /* Override some Bootstrap styles */
        .btn-custom-primary {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            border: none;
            color: white;
            box-shadow: 0 4px 12px rgba(109, 74, 255, 0.3);
            transition: var(--transition);
        }
        .btn-custom-primary:hover,
        .btn-custom-primary:active {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(109, 74, 255, 0.4);
            color: white;
        }
        /* ==================== LAYOUT STYLES ==================== */
        .app-container {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        .main-content {
            flex: 1;
            margin-top: var(--header-height);
            position: relative;
            z-index: 1;
        }
        /* ==================== HEADER STYLES ==================== */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: var(--header-height);
            background: rgba(18, 8, 58, 0.8);
            backdrop-filter: blur(10px);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 2rem;
            box-shadow: var(--shadow-md);
            border-bottom: 1px solid var(--border-color);
        }
        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            max-width: 1440px;
            margin: 0 auto;
            position: relative;
        }
        .logo {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }
        .logo-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            border-radius: var(--border-radius-sm);
            box-shadow: 0 2px 5px rgba(109, 74, 255, 0.3);
            overflow: hidden;
        }
        .logo-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .logo-icon.empty {
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            font-weight: bold;
            color: white;
        }
        .logo-text {
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            font-size: 1.8rem;
            color: var(--text-primary);
            letter-spacing: 1px;
            text-shadow: 0 0 10px rgba(109, 74, 255, 0.3);
        }
        .header-left {
            flex: 1;
        }
        .header-right {
            flex: 1;
            display: flex;
            justify-content: flex-end;
        }
        .search-bar {
            position: relative;
            width: 300px;
        }
        .search-input {
            width: 100%;
            padding: 10px 16px 10px 40px;
            background-color: rgba(27, 15, 84, 0.6);
            border: 1px solid rgba(109, 74, 255, 0.2);
            border-radius: var(--border-radius-md);
            color: var(--text-primary);
            font-size: 0.9rem;
            transition: var(--transition);
        }
        .search-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(109, 74, 255, 0.15);
        }
        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-tertiary);
            pointer-events: none;
        }
        /* Secret admin area - completely invisible */
        .admin-access-area {
            position: absolute;
            top: 0;
            right: 0;
            width: 40px;
            height: 40px;
            cursor: pointer;
            background-color: transparent;
            z-index: 1001;
        }
        /* Visible admin button - only shows when admin is logged in */
        .admin-btn {
            display: none; /* Hidden by default */
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            background-color: var(--bg-tertiary);
            border-radius: var(--border-radius-md);
            color: var(--text-primary);
            font-size: 1.2rem;
            transition: var(--transition);
            border: 1px solid rgba(109, 74, 255, 0.2);
            margin-left: 10px;
        }
        .admin-btn.visible {
            display: flex; /* Show when admin is logged in */
        }
        .admin-btn:hover {
            background-color: var(--primary);
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(109, 74, 255, 0.15);
        }

        /* ========== WIDGET STYLES ========== */
        /* Social/link widget button */
        .widget-container {
            display: flex;
            gap: 8px;
        }

        /* Square widget style */
        .widget-square {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background-color: var(--bg-tertiary);
            border-radius: var(--border-radius-md);
            color: var(--text-secondary);
            font-size: 1.25rem;
            transition: var(--transition);
            border: 1px solid rgba(255, 255, 255, 0.1);
            text-decoration: none;
            margin-right: 6px;
            position: relative;
        }

        .widget-square svg {
            width: 20px;
            height: 20px;
        }

        .widget-square:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
            color: white;
        }

        /* Discord widget */
        .widget-square.widget-discord {
            background-color: var(--discord);
            color: white;
        }
        .widget-square.widget-discord:hover {
            background-color: var(--discord-dark);
        }

        /* Tooltip for widgets */
        .widget-tooltip {
            position: absolute;
            bottom: -40px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            font-size: 0.75rem;
            padding: 5px 10px;
            border-radius: var(--border-radius-sm);
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.2s ease;
            pointer-events: none;
            z-index: 1002;
            visibility: hidden;
        }

        .widget-square:hover .widget-tooltip {
            opacity: 1;
            visibility: visible;
        }

        /* Hero section widget styles */
        .hero-widget-container {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }

        .hero-widget {
            width: 50px;
            height: 50px;
            font-size: 1.5rem;
        }

        /* Main section widget styles */
        .main-section {
            padding: 4rem 0;
            background-color: rgba(27, 15, 84, 0.4);
            border-top: 1px solid var(--border-color);
            border-bottom: 1px solid var(--border-color);
        }

        .main-widget-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .main-widget {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem 1.5rem;
            background-color: var(--bg-tertiary);
            border-radius: var(--border-radius-md);
            color: var(--text-secondary);
            font-size: 1rem;
            transition: var(--transition);
            border: 1px solid rgba(255, 255, 255, 0.1);
            text-decoration: none;
            position: relative;
            gap: 10px;
            min-width: 160px;
        }

        .main-widget:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
            color: white;
            background-color: var(--primary);
        }

        .main-widget svg {
            width: 22px;
            height: 22px;
        }

        .main-widget.widget-download {
            background-color: var(--primary);
            color: white;
        }

        .main-widget.widget-download:hover {
            background-color: var(--primary-dark);
        }

        /* Featured Widgets Styles */
        .featured-widgets-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 24px;
            margin-bottom: 2rem;
        }

        .featured-widget-card {
            background: linear-gradient(135deg, rgba(37, 20, 112, 0.9), rgba(27, 15, 84, 0.7));
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            transition: var(--transition);
            border: 1px solid var(--border-color);
            position: relative;
            display: flex;
            flex-direction: column;
            backdrop-filter: blur(5px);
            height: 100%;
        }

        .featured-widget-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: rgba(109, 74, 255, 0.2);
        }

        .featured-widget-image {
            position: relative;
            height: 180px;
            overflow: hidden;
        }

        .featured-widget-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .featured-widget-card:hover .featured-widget-image img {
            transform: scale(1.05);
        }

        .featured-widget-badge {
            position: absolute;
            top: 12px;
            right: 12px;
            padding: 4px 10px;
            border-radius: var(--border-radius-sm);
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            z-index: 1;
        }

        .featured-widget-content {
            padding: 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .featured-widget-title {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 10px;
            color: var(--text-primary);
            line-height: 1.4;
        }

        .featured-widget-description {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 20px;
            line-height: 1.6;
            flex: 1;
        }

        .featured-widget-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 10px 16px;
            border-radius: var(--border-radius-md);
            font-weight: 500;
            font-size: 0.9rem;
            transition: var(--transition);
            background: linear-gradient(to right, var(--primary-dark), var(--primary));
            color: white;
            text-decoration: none;
            margin-top: auto;
        }

        .featured-widget-btn:hover {
            background: linear-gradient(to right, var(--primary), var(--primary-dark));
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(109, 74, 255, 0.3);
            color: white;
        }

        .featured-widget-btn.discord {
            background: linear-gradient(to right, var(--discord-dark), var(--discord));
        }

        .featured-widget-btn.discord:hover {
            background: linear-gradient(to right, var(--discord), var(--discord-dark));
        }

        /* ==================== HERO SECTION ==================== */
        .hero-section {
            position: relative;
            height: 400px;
            overflow: hidden;
            margin-bottom: 3rem;
            background-image: linear-gradient(rgba(10, 5, 33, 0.7), rgba(10, 5, 33, 0.8)),
                              url('https://cdn.cloudflare.steamstatic.com/steam/apps/1091500/ss_9ce8d438bee236425b5820e2e19841c0a1f51e48.1920x1080.jpg?t=1686157127');
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .hero-content {
            text-align: center;
            max-width: 700px;
            padding: 0 2rem;
        }
        .hero-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 1rem;
            line-height: 1.2;
            color: var(--text-primary);
            text-shadow: 0 2px 10px rgba(109, 74, 255, 0.5);
        }
        .hero-subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }
        .hero-btn {
            padding: 12px 28px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: white;
            border-radius: var(--border-radius-md);
            font-weight: 600;
            font-size: 1rem;
            transition: var(--transition);
            box-shadow: 0 4px 12px rgba(109, 74, 255, 0.3);
        }
        .hero-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(109, 74, 255, 0.4);
        }
        /* ==================== CONTENT SECTIONS ==================== */
        .container {
            max-width: 1440px;
            margin: 0 auto;
            padding: 0 2rem;
        }
        .section {
            margin-bottom: 4rem;
        }
        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.5rem;
            position: relative;
        }
        .section-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--text-primary);
            position: relative;
            padding-left: 15px;
            margin-bottom: 0;
        }
        .section-title::before {
            content: "";
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 5px;
            height: 25px;
            background: linear-gradient(to bottom, var(--primary), var(--accent));
            border-radius: 2px;
        }
        /* ==================== CATEGORY TABS ==================== */
        .categories-container {
            margin-bottom: 2rem;
        }
        .category-tabs {
            display: flex;
            overflow-x: auto;
            scrollbar-width: none; /* For Firefox */
            -ms-overflow-style: none; /* For Internet Explorer and Edge */
            padding-bottom: 5px;
            gap: 8px;
            margin-bottom: 18px;
        }
        .category-tabs::-webkit-scrollbar {
            display: none; /* For Chrome, Safari, and Opera */
        }
        .category-tab {
            padding: 10px 20px;
            border-radius: var(--border-radius-md);
            font-size: 0.95rem;
            font-weight: 500;
            color: var(--text-tertiary);
            background-color: rgba(27, 15, 84, 0.4);
            border: 1px solid var(--border-color);
            cursor: pointer;
            white-space: nowrap;
            transition: var(--transition);
        }
        .category-tab:hover {
            border-color: var(--primary);
            color: var(--primary-light);
        }
        .category-tab.active {
            background: linear-gradient(45deg, var(--primary-dark), var(--primary));
            color: white;
            border-color: transparent;
            box-shadow: 0 4px 10px rgba(109, 74, 255, 0.2);
        }
        /* ==================== CARD GRID ==================== */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 24px;
        }
        .empty-state {
            grid-column: 1 / -1;
            text-align: center;
            padding: 5rem 0;
            color: var(--text-tertiary);
        }
        .empty-state h3 {
            font-size: 1.5rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }
        .empty-state p {
            max-width: 500px;
            margin: 0 auto;
            margin-bottom: 2rem;
        }
        .empty-state-icon {
            font-size: 4rem;
            color: var(--primary);
            margin-bottom: 1rem;
            opacity: 0.5;
        }
        .card {
            background: linear-gradient(135deg, rgba(37, 20, 112, 0.9), rgba(27, 15, 84, 0.7));
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            transition: var(--transition);
            border: 1px solid var(--border-color);
            position: relative;
            display: flex;
            flex-direction: column;
            backdrop-filter: blur(5px);
        }
        .card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: rgba(109, 74, 255, 0.2);
        }
        .card-image-container {
            position: relative;
            height: 180px;
            overflow: hidden;
        }
        .card-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        .card:hover .card-image {
            transform: scale(1.05);
        }
        .card-badge {
            position: absolute;
            top: 12px;
            right: 12px;
            padding: 4px 10px;
            border-radius: var(--border-radius-sm);
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            z-index: 1;
        }
        .badge-new {
            background-color: var(--primary);
            color: white;
        }
        .badge-hot {
            background-color: var(--danger);
            color: white;
        }
        .badge-popular {
            background-color: var(--success);
            color: white;
        }
        .badge-updated {
            background-color: var(--info);
            color: white;
        }
        .card-content {
            padding: 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        .card-title {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 8px;
            color: var(--text-primary);
            line-height: 1.4;
        }
        .card-meta {
            margin-bottom: 16px;
            color: var(--text-tertiary);
            font-size: 0.85rem;
            display: flex;
            gap: 12px;
        }
        .meta-item {
            display: flex;
            align-items: center;
            gap: 4px;
        }
        .card-description {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 20px;
            line-height: 1.6;
            flex: 1;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        .card-actions {
            margin-top: auto;
            display: flex;
            gap: 10px;
        }
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 10px 16px;
            border-radius: var(--border-radius-md);
            font-weight: 600;
            font-size: 0.9rem;
            transition: var(--transition);
            gap: 8px;
        }
        .btn-primary {
            background: linear-gradient(to right, var(--primary-dark), var(--primary));
            color: white;
            flex: 1;
        }
        .btn-primary:hover {
            background: linear-gradient(to right, var(--primary), var(--primary-dark));
            box-shadow: 0 4px 10px rgba(109, 74, 255, 0.3);
        }
        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
        }
        .btn-outline:hover {
            background-color: var(--bg-tertiary);
            border-color: var(--primary);
            color: var(--primary);
        }
        .btn-icon {
            width: 38px;
            padding: 0;
        }
        /* Admin card actions for delete/edit */
        .admin-card-actions {
            position: absolute;
            top: 12px;
            left: 12px;
            display: flex;
            gap: 6px;
            z-index: 10;
        }
        .admin-action-btn {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: rgba(10, 5, 33, 0.7);
            backdrop-filter: blur(5px);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            font-size: 14px;
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .delete-btn:hover {
            background-color: var(--danger);
            color: white;
        }
        /* ==================== LOGIN PAGE STYLES ==================== */
        .auth-container {
            max-width: 440px;
            margin: 4rem auto;
            padding: 2rem;
            background: linear-gradient(145deg, rgba(18, 8, 58, 0.9), rgba(27, 15, 84, 0.8));
            border-radius: var(--border-radius-lg);
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-lg);
            backdrop-filter: blur(10px);
        }
        .auth-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        .auth-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }
        .auth-subtitle {
            color: var(--text-tertiary);
            font-size: 0.95rem;
        }
        .form-group {
            margin-bottom: 1.5rem;
        }
        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-weight: 500;
        }
        .form-input {
            width: 100%;
            padding: 12px 16px;
            background-color: rgba(27, 15, 84, 0.6);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-md);
            color: var(--text-primary);
            font-size: 0.95rem;
            transition: var(--transition);
        }
        .form-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(109, 74, 255, 0.15);
        }
        .form-footer {
            display: flex;
            align-items: center;
            justify-content: space-(--text-secondary);
            margin-bottom: 1rem;
        }
        .empty-state p {
            max-width: 500px;
            margin: 0 auto;
            margin-bottom: 2rem;
        }
        .empty-state-icon {
            font-size: 4rem;
            color: var(--primary);
            margin-bottom: 1rem;
            opacity: 0.5;
        }
        .card {
            background: linear-gradient(135deg, rgba(37, 20, 112, 0.9), rgba(27, 15, 84, 0.7));
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            transition: var(--transition);
            border: 1px solid var(--border-color);
            position: relative;
            display: flex;
            flex-direction: column;
            backdrop-filter: blur(5px);
        }
        .card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: rgba(109, 74, 255, 0.2);
        }
        .card-image-container {
            position: relative;
            height: 180px;
            overflow: hidden;
        }
        .card-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        .card:hover .card-image {
            transform: scale(1.05);
        }
        .card-badge {
            position: absolute;
            top: 12px;
            right: 12px;
            padding: 4px 10px;
            border-radius: var(--border-radius-sm);
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            z-index: 1;
        }
        .badge-new {
            background-color: var(--primary);
            color: white;
        }
        .badge-hot {
            background-color: var(--danger);
            color: white;
        }
        .badge-popular {
            background-color: var(--success);
            color: white;
        }
        .badge-updated {
            background-color: var(--info);
            color: white;
        }
        .card-content {
            padding: 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        .card-title {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 8px;
            color: var(--text-primary);
            line-height: 1.4;
        }
        .card-meta {
            margin-bottom: 16px;
            color: var(--text-tertiary);
            font-size: 0.85rem;
            display: flex;
            gap: 12px;
        }
        .meta-item {
            display: flex;
            align-items: center;
            gap: 4px;
        }
        .card-description {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 20px;
            line-height: 1.6;
            flex: 1;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        .card-actions {
            margin-top: auto;
            display: flex;
            gap: 10px;
        }
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 10px 16px;
            border-radius: var(--border-radius-md);
            font-weight: 600;
            font-size: 0.9rem;
            transition: var(--transition);
            gap: 8px;
        }
        .btn-primary {
            background: linear-gradient(to right, var(--primary-dark), var(--primary));
            color: white;
            flex: 1;
        }
        .btn-primary:hover {
            background: linear-gradient(to right, var(--primary), var(--primary-dark));
            box-shadow: 0 4px 10px rgba(109, 74, 255, 0.3);
        }
        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
        }
        .btn-outline:hover {
            background-color: var(--bg-tertiary);
            border-color: var(--primary);
            color: var(--primary);
        }
        .btn-icon {
            width: 38px;
            padding: 0;
        }
        /* Admin card actions for delete/edit */
        .admin-card-actions {
            position: absolute;
            top: 12px;
            left: 12px;
            display: flex;
            gap: 6px;
            z-index: 10;
        }
        .admin-action-btn {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: rgba(10, 5, 33, 0.7);
            backdrop-filter: blur(5px);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            font-size: 14px;
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .delete-btn:hover {
            background-color: var(--danger);
            color: white;
        }
        /* ==================== LOGIN PAGE STYLES ==================== */
        .auth-container {
            max-width: 440px;
            margin: 4rem auto;
            padding: 2rem;
            background: linear-gradient(145deg, rgba(18, 8, 58, 0.9), rgba(27, 15, 84, 0.8));
            border-radius: var(--border-radius-lg);
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-lg);
            backdrop-filter: blur(10px);
        }
        .auth-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        .auth-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }
        .auth-subtitle {
            color: var(--text-tertiary);
            font-size: 0.95rem;
        }
        .form-group {
            margin-bottom: 1.5rem;
        }
        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-weight: 500;
        }
        .form-input {
            width: 100%;
            padding: 12px 16px;
            background-color: rgba(27, 15, 84, 0.6);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-md);
            color: var(--text-primary);
            font-size: 0.95rem;
            transition: var(--transition);
        }
        .form-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(109, 74, 255, 0.15);
        }
        .form-footer {
            display: flex;
            align-items: center;
            justify-content: space-(--border-color);
            color: var(--text-tertiary);
            font-size: 0.85rem;
        }
        /* SVG ICONS */
        .icon {
            width: 18px;
            height: 18px;
            stroke: currentColor;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
            fill: none;
        }
        /* LOGOUT BUTTON */
        .logout-btn {
            font-size: 0.9rem;
            color: var(--text-tertiary);
            background: transparent;
            padding: 8px 12px;
            border-radius: var(--border-radius-md);
            transition: var(--transition);
            display: none;
        }
        .logout-btn.visible {
            display: block;
        }
        .logout-btn:hover {
            color: var(--primary);
            background: rgba(109, 74, 255, 0.1);
        }
        /* Toast notification */
        .toast-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 9999;
        }
        .toast {
            background: linear-gradient(145deg, rgba(18, 8, 58, 0.95), rgba(27, 15, 84, 0.9));
            color: white;
            padding: 12px 20px;
            border-radius: var(--border-radius-md);
            margin-top: 10px;
            box-shadow: var(--shadow-lg);
            display: flex;
            align-items: center;
            gap: 10px;
            min-width: 250px;
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-color);
        }
        .toast.success {
            border-left: 4px solid var(--success);
        }
        .toast.error {
            border-left: 4px solid var(--danger);
        }
        /* RESPONSIVE STYLES */
        @media (max-width: 1024px) {
            .footer-content {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        @media (max-width: 768px) {
            .header {
                padding: 0 1rem;
            }
            .search-bar {
                width: 200px;
            }
            .hero-title {
                font-size: 2.5rem;
            }
            .hero-section {
                height: 350px;
            }
            .cards-grid {
                grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            }
            .form-grid {
                grid-template-columns: 1fr;
            }
            .form-grid .form-group:last-child,
            .form-group.full-width {
                grid-column: span 1;
            }
            .widget-tooltip {
                display: none;
            }
            .featured-widgets-container {
                grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            }
        }
        @media (max-width: 576px) {
            .hero-title {
                font-size: 2rem;
            }
            .hero-subtitle {
                font-size: 1rem;
            }
            .hero-section {
                height: 300px;
            }
            .hero-btn {
                padding: 10px 20px;
            }
            .container {
                padding: 0 1rem;
            }
            .footer-content {
                grid-template-columns: 1fr;
                gap: 2rem;
            }
            .search-bar {
                display: none;
            }
            .logo-text {
                font-size: 1.4rem;
            }
            .category-tab {
                padding: 8px 16px;
                font-size: 0.85rem;
            }
        }
    </style>
</head>
<body>
    <!-- Particle.js container -->
    <div id="particles-js"></div>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="header-left">
                    <div class="search-bar">
                        <div class="search-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                <circle cx="10" cy="10" r="7"></circle>
                                <line x1="21" y1="21" x2="15" y2="15"></line>
                            </svg>
                        </div>
                        <input type="text" id="searchInput" class="search-input" placeholder="Search games and software...">
                    </div>
                </div>
                <div class="logo">
                    <div id="siteLogo" class="logo-icon">
                        <div id="logoPlaceholder">C</div>
                    </div>
                    <div class="logo-text">CHOBBER'S SERVER</div>
                </div>
                <div class="header-right">
                    <!-- Header widgets will be inserted here from widgets.json -->
                    <div id="headerWidgets" class="widget-container">
                        <!-- Widgets will be loaded here -->
                    </div>

                    <!-- Invisible admin access area -->
                    <div id="adminAccessArea" class="admin-access-area"></div>
                    <!-- Only visible when admin is logged in -->
                    <button class="admin-btn" id="adminBtn">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                    </button>
                    <button class="logout-btn" id="logoutBtn">Logout</button>
                </div>
            </div>
        </header>
        <!-- Main Content -->
        <main class="main-content">
            <!-- Homepage -->
            <div id="homepage" class="page active">
                <!-- Hero Section -->
                <section class="hero-section">
                    <div class="hero-content">
                        <h1 class="hero-title">Premium Games & Software</h1>
                        <p class="hero-subtitle">Access a vast library of premium content, always up-to-date and ready to download</p>
                        <button class="btn btn-custom-primary btn-lg hero-btn">Explore Collection</button>
                        <!-- Hero widgets will be inserted here from widgets.json -->
                        <div id="heroWidgets" class="hero-widget-container">
                            <!-- Hero widgets will be loaded here -->
                        </div>
                    </div>
                </section>

                <!-- Main Widgets Section (for install buttons) -->
                <section id="mainWidgetsSection" class="main-section">
                    <div class="container">
                        <div class="row justify-content-center">
                            <div class="col-md-8 text-center">
                                <h2 class="mb-4">Download Now</h2>
                                <p class="mb-4">Choose your platform and get started today</p>
                                <div id="mainWidgets" class="main-widget-container">
                                    <!-- Main widgets will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <div class="container">
                    <!-- Categories Tabs -->
                    <div class="categories-container">
                        <div class="category-tabs" id="categoryTabs">
                            <div class="category-tab active" data-category="all">All Content</div>
                            <div class="category-tab" data-category="games">Games</div>
                            <div class="category-tab" data-category="creative">Creative Software</div>
                            <div class="category-tab" data-category="productivity">Productivity</div>
                            <div class="category-tab" data-category="mobile">Mobile Apps</div>
                            <div class="category-tab" data-category="templates">Templates & Assets</div>
                        </div>
                    </div>
                    <!-- Content Section -->
                    <section class="section">
                        <div class="section-header">
                            <h2 class="section-title">Featured Content</h2>
                        </div>

                        <!-- Featured Widgets Container -->
                        <div class="featured-widgets-container mb-4" id="featuredWidgetsContainer">
                            <!-- Featured widgets will be loaded here -->
                        </div>

                        <div class="cards-grid" id="cardsContainer">
                            <!-- Empty state will be shown initially, cards will be added here -->
                        </div>
                    </section>
                </div>
            </div>
            <!-- Login Page -->
            <div id="loginPage" class="page" style="display: none;">
                <div class="container">
                    <div class="auth-container">
                        <div class="auth-header">
                            <h2 class="auth-title">Admin Login</h2>
                            <p class="auth-subtitle">Enter your credentials to access admin panel</p>
                        </div>
                        <div class="error-message" id="loginError">
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                <circle cx="12" cy="12" r="9"></circle>
                                <line x1="12" y1="8" x2="12" y2="12"></line>
                                <line x1="12" y1="16" x2="12.01" y2="16"></line>
                            </svg>
                            Invalid username or password
                        </div>
                        <form id="loginForm">
                            <div class="form-group">
                                <label for="username" class="form-label">Username</label>
                                <input type="text" id="username" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label for="password" class="form-label">Password</label>
                                <input type="password" id="password" class="form-input" required>
                            </div>
                            <div class="form-footer">
                                <div class="form-checkbox">
                                    <input type="checkbox" id="remember">
                                    <label for="remember">Remember me</label>
                                </div>
                            </div>
                            <button type="submit" class="btn btn-custom-primary submit-btn">Sign In</button>
                        </form>
                    </div>
                </div>
            </div>
            <!-- Add New Link Page -->
            <div id="addLinkPage" class="page" style="display: none;">
                <div class="container">
                    <div class="form-container">
                        <div class="form-header">
                            <h2 class="form-title">Add New Content</h2>
                            <a href="#" class="back-btn" id="backBtn">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                    <line x1="5" y1="12" x2="19" y2="12"></line>
                                    <line x1="5" y1="12" x2="11" y2="18"></line>
                                    <line x1="5" y1="12" x2="11" y2="6"></line>
                                </svg>
                                Back to Dashboard
                            </a>
                        </div>
                        <form id="addLinkForm">
                            <!-- Logo upload area -->
                            <div class="logo-upload-container" id="logoUploadContainer">
                                <div class="logo-preview" id="logoPreview">
                                    <span>+</span>
                                </div>
                                <p>Click to upload site logo</p>
                                <input type="file" id="logoUpload" style="display: none;" accept="image/*">
                            </div>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="title" class="form-label">Title</label>
                                    <input type="text" id="title" class="form-input" required placeholder="Enter content title">
                                    <p class="form-help">Name of the game or software</p>
                                </div>
                                <div class="form-group">
                                    <label for="category" class="form-label">Category</label>
                                    <select class="form-input form-select" id="category">
                                        <option value="games">Games</option>
                                        <option value="creative">Creative Software</option>
                                        <option value="productivity">Productivity</option>
                                        <option value="mobile">Mobile Apps</option>
                                        <option value="templates">Templates & Assets</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="imageUrl" class="form-label">Image URL</label>
                                    <input type="url" id="imageUrl" class="form-input" required placeholder="https://example.com/image.jpg">
                                    <p class="form-help">URL to the cover image</p>
                                </div>
                                <div class="form-group">
                                    <label for="badge" class="form-label">Badge (optional)</label>
                                    <select class="form-input form-select" id="badge">
                                        <option value="">None</option>
                                        <option value="NEW">New</option>
                                        <option value="HOT">Hot</option>
                                        <option value="POPULAR">Popular</option>
                                        <option value="UPDATED">Updated</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="description" class="form-label">Description (optional)</label>
                                    <textarea id="description" class="form-input" rows="3" placeholder="Brief description of the content"></textarea>
                                </div>
                                <div class="form-group">
                                    <label for="driveUrl" class="form-label">Google Drive URL</label>
                                    <input type="url" id="driveUrl" class="form-input" required placeholder="https://drive.google.com/...">
                                    <p class="form-help">Direct link to the Google Drive file or folder</p>
                                </div>
                            </div>
                            <div class="form-actions">
                                <button type="button" class="cancel-btn" id="cancelBtn">Cancel</button>
                                <button type="submit" class="btn btn-custom-primary submit-btn">Publish Content</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </main>
        <!-- Confirmation Dialog (Bootstrap Modal) -->
        <div class="modal fade" id="deleteConfirmModal" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Confirm Deletion</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        Are you sure you want to delete this item? This action cannot be undone.
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-danger" id="confirmDeleteBtn">Delete</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Toast Notifications Container -->
        <div class="toast-container position-fixed bottom-0 end-0 p-3" id="toastContainer"></div>
        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>CHOBBER'S SERVER</h3>
                    <p style="color: var(--text-tertiary); font-size: 0.9rem; line-height: 1.6;">
                        The premier destination for high-quality games and professional software distribution.
                    </p>
                </div>
                <div class="footer-column">
                    <h3>Browse</h3>
                    <ul class="footer-links">
                        <li><a href="#">Games</a></li>
                        <li><a href="#">Creative Software</a></li>
                        <li><a href="#">Productivity Tools</a></li>
                        <li>
                            <!-- Hidden admin trigger in footer -->
                            <a href="#" id="footerAdminLink">Mobile Apps</a>
                        </li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Support</h3>
                    <ul class="footer-links">
                        <li><a href="#">Help Center</a></li>
                        <li><a href="#">Contact Us</a></li>
                        <li><a href="#">FAQs</a></li>
                        <li>
                            <!-- Another hidden admin trigger in footer -->
                            <a href="#" id="footerAdminLink2">Request Content</a>
                        </li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Legal</h3>
                    <ul class="footer-links">
                        <li><a href="#">Terms of Service</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">DMCA Policy</a></li>
                        <li><a href="#">Refund Policy</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p> 2023 CHOBBER'S SERVER. All rights reserved.</p>
            </div>
        </footer>
    </div>
    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // ==================== PARTICLES.JS CONFIGURATION ====================
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize particles.js
            particlesJS('particles-js', {
                "particles": {
                    "number": {
                        "value": 100,
                        "density": {
                            "enable": true,
                            "value_area": 800
                        }
                    },
                    "color": {
                        "value": "#6d4aff"
                    },
                    "shape": {
                        "type": "circle",
                        "stroke": {
                            "width": 0,
                            "color": "#000000"
                        },
                        "polygon": {
                            "nb_sides": 5
                        }
                    },
                    "opacity": {
                        "value": 0.3,
                        "random": true,
                        "anim": {
                            "enable": true,
                            "speed": 1,
                            "opacity_min": 0.1,
                            "sync": false
                        }
                    },
                    "size": {
                        "value": 5,
                        "random": true,
                        "anim": {
                            "enable": true,
                            "speed": 2,
                            "size_min": 0.3,
                            "sync": false
                        }
                    },
                    "line_linked": {
                        "enable": true,
                        "distance": 150,
                        "color": "#6d4aff",
                        "opacity": 0.2,
                        "width": 1
                    },
                    "move": {
                        "enable": true,
                        "speed": 1,
                        "direction": "none",
                        "random": true,
                        "straight": false,
                        "out_mode": "out",
                        "bounce": false,
                        "attract": {
                            "enable": false,
                            "rotateX": 600,
                            "rotateY": 1200
                        }
                    }
                },
                "interactivity": {
                    "detect_on": "canvas",
                    "events": {
                        "onhover": {
                            "enable": true,
                            "mode": "grab"
                        },
                        "onclick": {
                            "enable": true,
                            "mode": "push"
                        },
                        "resize": true
                    },
                    "modes": {
                        "grab": {
                            "distance": 150,
                            "line_linked": {
                                "opacity": 0.6
                            }
                        },
                        "bubble": {
                            "distance": 400,
                            "size": 40,
                            "duration": 2,
                            "opacity": 8,
                            "speed": 3
                        },
                        "repulse": {
                            "distance": 200,
                            "duration": 0.4
                        },
                        "push": {
                            "particles_nb": 4
                        },
                        "remove": {
                            "particles_nb": 2
                        }
                    }
                },
                "retina_detect": true
            });
            // ==================== DOM ELEMENTS ====================
            const homepage = document.getElementById("homepage");
            const loginPage = document.getElementById("loginPage");
            const addLinkPage = document.getElementById("addLinkPage");
            const cardsContainer = document.getElementById("cardsContainer");
            const searchInput = document.getElementById("searchInput");
            const categoryTabs = document.getElementById("categoryTabs");
            const deleteConfirmModal = new bootstrap.Modal(document.getElementById('deleteConfirmModal'));
            const confirmDeleteBtn = document.getElementById("confirmDeleteBtn");
            const siteLogo = document.getElementById("siteLogo");
            const logoPlaceholder = document.getElementById("logoPlaceholder");
            const logoUploadContainer = document.getElementById("logoUploadContainer");
            const logoPreview = document.getElementById("logoPreview");
            const logoUpload = document.getElementById("logoUpload");
            const toastContainer = document.getElementById("toastContainer");
            const headerWidgets = document.getElementById("headerWidgets");
            const heroWidgets = document.getElementById("hero");
            const mainWidgets = document.getElementById("mainWidgets");
            const mainWidgetsSection = document.getElementById("mainWidgetsSection");
            const featuredWidgetsContainer = document.getElementById("featuredWidgetsContainer");

            // Admin elements
            const adminBtn = document.getElementById("adminBtn");
            const adminAccessArea = document.getElementById("adminAccessArea");
            const footerAdminLink = document.getElementById("footerAdminLink");
            const footerAdminLink2 = document.getElementById("footerAdminLink2");
            const logoutBtn = document.getElementById("logoutBtn");
            const loginForm = document.getElementById("loginForm");
            const loginError = document.getElementById("loginError");
            const addLinkForm = document.getElementById("addLinkForm");
            const backBtn = document.getElementById("backBtn");
            const cancelBtn = document.getElementById("cancelBtn");

            // ==================== ADMIN CREDENTIALS ====================
            const adminCredentials = {
                username: "admin",
                password: "password123"
            };

            // ==================== SECRET ADMIN ACCESS VARIABLES ====================
            let clickCount = 0;
            let lastClickTime = 0;

            // ==================== DATA STORAGE ====================
            // Load cards from localStorage or use initial data (empty array)
            let cards = [];
            try {
                const savedCards = localStorage.getItem("chobbersCards");
                if (savedCards) {
                    cards = JSON.parse(savedCards);
                }
            } catch (error) {
                console.error("Error loading cards from localStorage:", error);
                cards = [];
            }

            // Widget data storage
            let widgetData = null;

            // Load widgets from JSON file
            async function loadWidgets() {
                try {
                    const response = await fetch('widgets.json');
                    if (!response.ok) {
                        throw new Error(`Failed to fetch widgets: ${response.status}`);
                    }

                    widgetData = await response.json();
                    if (widgetData) {
                        renderWidgets();
                    }
                } catch (error) {
                    console.error("Error loading widgets:", error);
                    showToast("Error loading widgets. Check widgets.json file.", "danger");
                }
            }

            // Render widgets based on the loaded JSON data
            function renderWidgets() {
                if (!widgetData) return;

                // Render header widgets
                if (widgetData.header && Array.isArray(widgetData.header)) {
                    headerWidgets.innerHTML = '';
                    widgetData.header.forEach(widget => {
                        const widgetElement = createWidgetElement(widget);
                        headerWidgets.appendChild(widgetElement);
                    });
                }

                // Render hero widgets
                if (heroWidgets && widgetData.hero && Array.isArray(widgetData.hero)) {
                    heroWidgets.innerHTML = '';
                    widgetData.hero.forEach(widget => {
                        const widgetElement = createWidgetElement(widget, true);
                        heroWidgets.appendChild(widgetElement);
                    });
                }

                // Render main widgets
                if (mainWidgets && widgetData.main && Array.isArray(widgetData.main)) {
                    mainWidgets.innerHTML = '';
                    widgetData.main.forEach(widget => {
                        const widgetElement = createWidgetElement(widget, false, true);
                        mainWidgets.appendChild(widgetElement);
                    });

                    // Show or hide main widgets section based on whether we have widgets
                    if (widgetData.main.length > 0) {
                        mainWidgetsSection.style.display = 'block';
                    } else {
                        mainWidgetsSection.style.display = 'none';
                    }
                } else if (mainWidgetsSection) {
                    mainWidgetsSection.style.display = 'none';
                }

                // Render featured widgets
                if (featuredWidgetsContainer && widgetData.featured && Array.isArray(widgetData.featured)) {
                    featuredWidgetsContainer.innerHTML = '';
                    widgetData.featured.forEach(widget => {
                        const widgetElement = createFeaturedWidgetElement(widget);
                        featuredWidgetsContainer.appendChild(widgetElement);
                    });

                    // Show or hide featured widgets container based on whether we have widgets
                    featuredWidgetsContainer.style.display = widgetData.featured.length > 0 ? 'grid' : 'none';
                } else if (featuredWidgetsContainer) {
                    featuredWidgetsContainer.style.display = 'none';
                }
            }

            // Function to create featured widget elements
            function createFeaturedWidgetElement(widget) {
                const featuredWidget = document.createElement('div');
                featuredWidget.className = 'featured-widget-card';

                // Determine badge class based on badge value
                let badgeClass = '';
                if (widget.badge) {
                    switch (widget.badge.toUpperCase()) {
                        case 'NEW':
                            badgeClass = 'badge-new';
                            break;
                        case 'HOT':
                            badgeClass = 'badge-hot';
                            break;
                        case 'POPULAR':
                            badgeClass = 'badge-popular';
                            break;
                        case 'UPDATED':
                            badgeClass = 'badge-updated';
                            break;
                        default:
                            badgeClass = 'badge-new';
                    }
                }

                // Determine button class based on widget type
                let buttonClass = '';
                if (widget.type === 'discord') {
                    buttonClass = 'discord';
                }

                // Determine button text based on widget type
                let buttonText = 'View Details';
                if (widget.type === 'discord') {
                    buttonText = 'Join Discord';
                }

                featuredWidget.innerHTML = `
                    <div class="featured-widget-image">
                        <img src="${widget.image}" alt="${widget.title}">
                        ${widget.badge ? `<div class="featured-widget-badge ${badgeClass}">${widget.badge}</div>` : ''}
                    </div>
                    <div class="featured-widget-content">
                        <h3 class="featured-widget-title">${widget.title}</h3>
                        <p class="featured-widget-description">${widget.description || ''}</p>
                        <a href="${widget.url}" target="_blank" class="featured-widget-btn ${buttonClass}">${buttonText}</a>
                    </div>
                `;

                return featuredWidget;
            }

            // Create widget element based on widget data
            function createWidgetElement(widget, isHero = false, isMain = false) {
                const widgetElement = document.createElement('a');
                widgetElement.href = widget.url;
                widgetElement.target = '_blank';
                widgetElement.rel = 'noopener noreferrer';

                // Apply appropriate classes
                if (isMain) {
                    widgetElement.className = `main-widget ${widget.type ? 'widget-' + widget.type : ''} ${widget.isLarge ? 'main-widget-large' : ''}`;
                } else {
                    widgetElement.className = isHero
                        ? `widget-square hero-widget ${widget.type ? 'widget-' + widget.type : ''}`
                        : `widget-square ${widget.type ? 'widget-' + widget.type : ''}`;
                }

                // Create icon based on type
                let iconSvg = '';
                let widgetContent = '';

                switch (widget.type) {
                    case 'discord':
                        iconSvg = `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M13.545 2.907a13.227 13.227 0 0 0-3.257-1.011.05.05 0 0 0-.052.025c-.141.25-.297.577-.406.833a12.19 12.19 0 0 0-3.658 0 8.258 8.258 0 0 0-.412-.833.051.051 0 0 0-.052-.025c-1.125.194-2.22.534-3.257 1.011a.041.041 0 0 0-.021.018C.356 6.024-.213 9.047.066 12.032c.001.014.01.028.021.037a13.276 13.276 0 0 0 3.995 2.02.05.05 0 0 0 .056-.019c.308-.42.582-.863.818-1.329a.05.5 0 0 0-.01-.059.051.051 0 0 0-.018-.011 8.875 8.875 0 0 1-1.248-.595.05.05 0 0 1-.02-.066.051.051 0 0 1 .015-.019c.084-.063.168-.129.248-.195a.05.05 0 0 1 .051-.007c2.619 1.196 5.454 1.196 8.041 0a.052.052 0 0 1 .053.007c.08.066.164.132.248.195a.051.051 0 0 1-.004.085 8.254 8.254 0 0 1-1.249.594.05.05 0 0 0-.03.03.052.052 0 0 0 .003.041c.24.465.515.909.817 1.329a.05.05 0 0 0 .056.019 13.235 13.235 0 0 0 4.001-2.02.049.049 0 0 0 .021-.037c.334-3.451-.559-6.449-2.366-9.106a.034.034 0 0 0-.02-.019Zm-8.198 7.307c-.789 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.45.73 1.438 1.613 0 .888-.637 1.612-1.438 1.612Zm5.316 0c-.788 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.451.73 1.438 1.613 0 .888-.631 1.612-1.438 1.612Z"/>
                        </svg>`;
                        break;
                    case 'download':
                        iconSvg = `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                            <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
                        </svg>`;
                        break;
                    case 'custom':
                        // For custom widgets, use the icon provided in the JSON
                        iconSvg = widget.icon || '?';
                        break;
                    default:
                        // Default icon for unknown types
                        iconSvg = '?';
                }

                // Create content based on widget type and location
                if (isMain) {
                    widgetContent = `
                        ${iconSvg}
                        <span>${widget.name}</span>
                    `;
                } else {
                    widgetContent = `
                        ${iconSvg}
                        <span class="widget-tooltip">${widget.tooltip || widget.name || 'Link'}</span>
                    `;
                }

                widgetElement.innerHTML = widgetContent;

                return widgetElement;
            }

            let currentCategory = "all"; // Track current category filter
            let cardToDelete = null; // Store the card ID to delete

            // Load site logo
            const savedLogo = localStorage.getItem("chobbersLogo");
            if (savedLogo) {
                siteLogo.innerHTML = `<img src="${savedLogo}" alt="Site Logo">`;
                logoPlaceholder.style.display = 'none';
            }

            // =================== TOAST NOTIFICATION SYSTEM ===================
            function showToast(message, type = 'success') {
                // Create toast element using Bootstrap
                const toastEl = document.createElement('div');
                toastEl.className = `toast align-items-center border-0 ${type === 'success' ? 'bg-success' : 'bg-danger'} text-white`;
                toastEl.setAttribute('role', 'alert');
                toastEl.setAttribute('aria-live', 'assertive');
                toastEl.setAttribute('aria-atomic', 'true');
                toastEl.innerHTML = `
                    <div class="d-flex">
                        <div class="toast-body">
                            ${message}
                        </div>
                        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
                    </div>
                `;
                toastContainer.appendChild(toastEl);
                const bsToast = new bootstrap.Toast(toastEl, {
                    delay: 5000,
                    autohide: true
                });
                bsToast.show();
                // Remove the element when hidden
                toastEl.addEventListener('hidden.bs.toast', function() {
                    toastEl.remove();
                });
            }

            // ==================== LOGO UPLOAD FUNCTIONALITY ====================
            logoUploadContainer.addEventListener('click', () => {
                logoUpload.click();
            });
            logoUpload.addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (!file) return;
                if (!file.type.startsWith('image/')) {
                    showToast('Please select an image file', 'danger');
                    return;
                }
                const reader = new FileReader();
                reader.onload = (e) => {
                    const dataUrl = e.target.result;
                    // Update preview
                    logoPreview.innerHTML = `<img src="${dataUrl}" alt="Logo Preview">`;
                    // Store logo in localStorage
                    localStorage.setItem("chobbersLogo", dataUrl);
                    // Update site logo
                    siteLogo.innerHTML = `<img src="${dataUrl}" alt="Site Logo">`;
                    logoPlaceholder.style.display = 'none';
                    showToast('Logo uploaded successfully');
                };
                reader.readAsDataURL(file);
            });

            // Check if admin is logged in (using session storage)
            function isAdminLoggedIn() {
                return sessionStorage.getItem('adminLoggedIn') === 'true';
            }

            // Set admin logged in status
            function setAdmin(status) {
                if (status) {
                    sessionStorage.setItem('adminLoggedIn', 'true');
                } else {
                    sessionStorage.removeItem('adminLoggedIn');
                }
                updateAdminUI();
            }

            // Update UI based on admin login status
            function updateAdminUI() {
                if (isAdminLoggedIn()) {
                    adminBtn.classList.add('visible');
                    logoutBtn.classList.add('visible');
                } else {
                    adminBtn.classList.remove('visible');
                    logoutBtn.classList.remove('visible');
                }
                // Rerender cards to show/hide admin actions
                renderCards();
            }

            // ==================== DELETE FUNCTIONALITY ====================
            function showDeleteConfirmation(cardId) {
                cardToDelete = cardId;
                deleteConfirmModal.show();
            }

            // Delete card function - completely rewritten for reliability
            function deleteCard(cardId) {
                console.log("Attempting to delete card with ID:", cardId);
                // First, find the index of the card to delete
                const cardIndex = cards.findIndex(card => card.id === cardId);
                if (cardIndex !== -1) {
                    // Remove the card from the array
                    cards.splice(cardIndex, 1);
                    // Save changes to localStorage
                    localStorage.setItem("chobbersCards", JSON.stringify(cards));
                    // Re-render the updated cards
                    renderCards();
                    // Show success toast
                    showToast("Item successfully deleted", "success");
                    console.log("Card deleted successfully. Remaining cards:", cards.length);
                    return true;
                } else {
                    console.error("Card with ID:", cardId, "not found.");
                    showToast("Error: Item not found", "danger");
                    return false;
                }
            }

            // ==================== CARD FUNCTIONALITY ====================
            // Function to filter cards based on category and search term
            function filterCards() {
                const searchTerm = searchInput.value.toLowerCase();
                return cards.filter(card => {
                    const matchesCategory = currentCategory === 'all' || card.category === currentCategory;
                    const matchesSearch = card.title.toLowerCase().includes(searchTerm) ||
                                          (card.description && card.description.toLowerCase().includes(searchTerm));
                    return matchesCategory && matchesSearch;
                });
            }

            // Function to render filtered cards
            function renderCards() {
                if (!cardsContainer) {
                    console.error("Cannot render cards: container element not found");
                    return;
                }
                const filteredCards = filterCards();
                cardsContainer.innerHTML = "";
                // Show empty state if no cards
                if (cards.length === 0) {
                    cardsContainer.innerHTML= `
                        <div class="empty-state">
                            <div class="empty-state-icon"></div>
                            <h3>No content found</h3>
                            <p>Click the "+" button when logged in as admin to add your first content item.</p>
                        </div>
                    `;
                    return;
                }
                // Show no results message if no matching cards
                if (filteredCards.length === 0) {
                    cardsContainer.innerHTML = `
                        <div class="empty-state">
                            <div class="empty-state-icon"></div>
                            <h3>No matching content</h3>
                            <p>Try adjusting your search or filter criteria to find what you're looking for.</p>
                        </div>
                    `;
                    return;
                }
                // Render cards
                filteredCards.forEach(card => {
                    const cardElement = createCardElement(card);
                    cardsContainer.appendChild(cardElement);
                });
                // Set up delete buttons
                if (isAdminLoggedIn()) {
                    document.querySelectorAll('.delete-btn').forEach(btn => {
                        btn.addEventListener('click', function() {
                            const cardId = this.getAttribute('data-id');
                            showDeleteConfirmation(cardId);
                        });
                    });
                }
            }

            // Function to create a single card element
            function createCardElement(card) {
                const cardDiv = document.createElement("div");
                cardDiv.className = "card";
                cardDiv.setAttribute("data-id", card.id); // Store card ID in data attribute
                // Add badge if it exists
                const badgeHtml = card.badge ?
                    `<div class="card-badge badge-${card.badge.toLowerCase()}">${card.badge}</div>` : '';
                // Add admin action buttons if logged in
                const adminActionsHtml = isAdminLoggedIn() ? `
                    <div class="admin-card-actions">
                        <button class="admin-action-btn delete-btn" data-id="${card.id}" title="Delete" aria-label="Delete item">
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon" viewBox="0 0 24 24">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                <line x1="4" y1="7" x2="20" y2="7"></line>
                                <line x1="10" y1="11" x2="10" y2="17"></line>
                                <line x1="14" y1="11" x2="14" y2="17"></line>
                                <path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"></path>
                                <path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"></path>
                            </svg>
                        </button>
                    </div>` : '';
                cardDiv.innerHTML = `
                    <div class="card-image-container">
                        <img src="${card.image}" alt="${card.title}" class="card-image">
                        ${badgeHtml}
                        ${adminActionsHtml}
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">${card.title}</h3>
                        <div class="card-meta">
                            <div class="meta-item">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                    <path d="M12 3l8 4.5v9l-8 4.5l-8 -4.5v-9l8 -4.5"></path>
                                    <line x1="12" y1="12" x2="12" y2="12.01"></line>
                                    <path d="M12 12l8 -4.5"></path>
                                    <path d="M8.2 9.8l7.6 -4.6"></path>
                                </svg>
                                ${capitalizeFirstLetter(card.category) || 'General'}
                            </div>
                        </div>
                        <p class="card-description">${card.description || 'No description available'}</p>
                        <div class="card-actions">
                            <a href="${card.url}" target="_blank" class="btn btn-primary">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                    <path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"></path>
                                    <polyline points="7 11 12 16 17 11"></polyline>
                                    <line x1="12" y1="4" x2="12" y2="16"></line>
                                </svg>
                                Download
                            </a>
                            <button class="btn btn-outline btn-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                    <path d="M19.5 13.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                `;
                return cardDiv;
            }

            // Helper function to capitalize first letter
            function capitalizeFirstLetter(string) {
                return string ? string.charAt(0).toUpperCase() + string.slice(1) : '';
            }

            // Function to add a new card
            function addNewCard(title, imageUrl, driveUrl, category, badge, description) {
                // Generate a unique ID for the card
                const id = 'card' + Date.now();
                const newCard = {
                    id: id,
                    title: title,
                    image: imageUrl,
                    url: driveUrl,
                    badge: badge,
                    category: category,
                    description: description
                };
                // Add to beginning of array
                cards.unshift(newCard);
                saveCards();
                renderCards();
                showToast('New content added successfully');
            }

            // Function to save cards to localStorage
            function saveCards() {
                localStorage.setItem("chobbersCards", JSON.stringify(cards));
            }

            // Function to navigate between pages
            function navigateTo(page) {
                homepage.style.display = "none";
                loginPage.style.display = "none";
                addLinkPage.style.display = "none";
                if (page === "homepage") {
                    homepage.style.display = "block";
                } else if (page === "login") {
                    loginPage.style.display = "block";
                } else if (page === "addLink") {
                    addLinkPage.style.display = "block";
                }
            }

            // ==================== EVENT LISTENERS ====================
            // Admin button click (visible only when logged in)
            adminBtn.addEventListener("click", () => {
                navigateTo("addLink");
            });

            // Secret admin access area click handling
            adminAccessArea.addEventListener("click", (e) => {
                const currentTime = new Date().getTime();
                // Reset counter if clicks are more than 1 second apart
                if (currentTime - lastClickTime > 1000) {
                    clickCount = 0;
                }
                clickCount++;
                lastClickTime = currentTime;
                // After 3 quick clicks, show login page
                if (clickCount >= 3) {
                    clickCount = 0;
                    navigateTo("login");
                }
            });

            // Footer hidden admin access
            footerAdminLink.addEventListener("click", (e) => {
                // Prevent normal navigation
                e.preventDefault();
                // Special sequence: right-click followed by left-click within 1 second
                const now = new Date().getTime();
                if (e.button === 0 && footerAdminLink.dataset.rightClicked === 'true' &&
                    now - parseInt(footerAdminLink.dataset.clickTime || 0) < 1000) {
                    navigateTo("login");
                    // Reset state
                    footerAdminLink.dataset.rightClicked = 'false';
                }
            });

            footerAdminLink.addEventListener("contextmenu", (e) => {
                // Mark that right-click occurred and store the time
                footerAdminLink.dataset.rightClicked = 'true';
                footerAdminLink.dataset.clickTime = new Date().getTime();
                // Don't show context menu
                e.preventDefault();
            });

            // Second footer link - double-click access
            footerAdminLink2.addEventListener("dblclick", (e) => {
                e.preventDefault();
                navigateTo("login");
            });

            // Logout button click
            logoutBtn.addEventListener("click", () => {
                setAdminLoggedIn(false);
                navigateTo("homepage");
                showToast('Logged out successfully');
            });

            // Login form submission
            loginForm.addEventListener("submit", (e) => {
                e.preventDefault();
                const username = document.getElementById("username").value;
                const password = document.getElementById("password").value;
                const remember = document.getElementById("remember").checked;
                if (username === adminCredentials.username && password === adminCredentials.password) {
                    setAdminLoggedIn(true);
                    navigateTo("addLink");
                    loginForm.reset();
                    loginError.style.display = "none";
                    showToast('Logged in successfully');
                } else {
                    loginError.style.display = "flex";
                    setTimeout(() => {
                        loginError.style.display = "none";
                    }, 3000);
                }
            });

            // Add link form submission
            addLinkForm.addEventListener("submit", (e) => {
                e.preventDefault();
                const title = document.getElementById("title").value;
                const imageUrl = document.getElementById("imageUrl").value;
                const driveUrl = document.getElementById("driveUrl").value;
                const category = document.getElementById("category").value;
                const badge = document.getElementById("badge").value;
                const description = document.getElementById("description").value;
                addNewCard(title, imageUrl, driveUrl, category, badge, description);
                addLinkForm.reset();
                navigateTo("homepage");
            });

            // Back button click
            backBtn.addEventListener("click", (e) =>  {
                e.preventDefault();
                navigateTo("homepage");
            });

            // Cancel button click
            cancelBtn.addEventListener("click", (e) => {
                e.preventDefault();
                navigateTo("homepage");
            });

            // Confirm delete button click (Bootstrap modal)
            confirmDeleteBtn.addEventListener('click', function() {
                if (cardToDelete) {
                    deleteCard(cardToDelete);
                    deleteConfirmModal.hide();
                    cardToDelete = null;
                }
            });

            // Category tabs click
            if (categoryTabs) {
                categoryTabs.querySelectorAll('.category-tab').forEach(tab => {
                    tab.addEventListener('click', () => {
                        categoryTabs.querySelectorAll('.category-tab').forEach(t => t.classList.remove('active'));
                        tab.classList.add('active');
                        currentCategory = tab.dataset.category;
                        renderCards();
                    });
                });
            }

            // Search input
            if (searchInput) {
                searchInput.addEventListener('input', () => {
                    renderCards();
                });
            }

            // Add event listener for secret key combination (Ctrl+Shift+A)
            document.addEventListener('keydown', function(event) {
                if (event.ctrlKey && event.shiftKey && event.key === 'A') {
                    navigateTo('login');
                    event.preventDefault();
                }
            });

            // ==================== INITIALIZATION ====================
            // Load widgets first
            loadWidgets();

            // Initially hide the main widgets section until we know if there are widgets
            if (mainWidgetsSection) {
                mainWidgetsSection.style.display = 'none';
            }

            // Set initial state for featured widgets container
            if (featuredWidgetsContainer) {
                featuredWidgetsContainer.style.display = 'none';
            }

            // Render initial cards
            renderCards();

            // Update admin UI based on login status
            updateAdminUI();
        });
    </script>
</body>
</html>
